(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{24:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),c=n(16),a=n.n(c),u=n(5),i=n(12),o=(n(36),n(7)),j=n(3),b=n(4),l=n.n(b),d=n(11),p=n(26),O=n.n(p);function f(e){return h.apply(this,arguments)}function h(){return(h=Object(d.a)(l.a.mark((function e(t){var n,r,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=s.length>1&&void 0!==s[1]?s[1]:{}).method=n.method||"GET",n.headers=n.headers||{},"GET"!==n.method.toUpperCase()&&(n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.headers["XSRF-Token"]=O.a.get("XSRF-TOKEN")),e.next=6,window.fetch(t,n);case 6:if(!((r=e.sent).status>=400)){e.next=9;break}throw r;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x="session/setUser",v="session/removeUser",m=function(e){return{type:x,payload:e}},w={user:null},g=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case x:return(e=Object.assign({},t)).user=n.payload,e;case v:return(e=Object.assign({},t)).user=null,e;default:return t}},y=(n(38),n(1));var S=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.session.user})),n=Object(r.useState)(""),s=Object(o.a)(n,2),c=s[0],a=s[1],i=Object(r.useState)(""),b=Object(o.a)(i,2),p=b[0],O=b[1],h=Object(r.useState)([]),x=Object(o.a)(h,2),v=x[0],w=x[1];return t?Object(y.jsx)(j.a,{to:"/"}):Object(y.jsxs)("form",{onSubmit:function(t){return t.preventDefault(),w([]),e((n={credential:c,password:p},function(){var e=Object(d.a)(l.a.mark((function e(t){var r,s,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.credential,s=n.password,e.next=3,f("/api/session",{method:"POST",body:JSON.stringify({credential:r,password:s})});case 3:return c=e.sent,e.next=6,c.json();case 6:return a=e.sent,t(m(a.user)),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).catch(function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:(n=e.sent)&&n.errors&&w(n.errors);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var n},children:[Object(y.jsx)("ul",{children:v.map((function(e,t){return Object(y.jsx)("li",{children:e},t)}))}),Object(y.jsxs)("label",{children:["Username or Email",Object(y.jsx)("input",{type:"text",value:c,onChange:function(e){return a(e.target.value)},required:!0})]}),Object(y.jsxs)("label",{children:["Password",Object(y.jsx)("input",{type:"password",value:p,onChange:function(e){return O(e.target.value)},required:!0})]}),Object(y.jsx)("button",{type:"submit",children:"Log In"})]})};n(41);var k=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.session.user})),n=Object(r.useState)(""),s=Object(o.a)(n,2),c=s[0],a=s[1],i=Object(r.useState)(""),b=Object(o.a)(i,2),p=b[0],O=b[1],h=Object(r.useState)(""),x=Object(o.a)(h,2),v=x[0],w=x[1],g=Object(r.useState)(""),S=Object(o.a)(g,2),k=S[0],C=S[1],E=Object(r.useState)([]),T=Object(o.a)(E,2),L=T[0],P=T[1];return t?Object(y.jsx)(j.a,{to:"/"}):Object(y.jsxs)("form",{onSubmit:function(t){return t.preventDefault(),v===k?(P([]),e((n={email:c,username:p,password:v},function(){var e=Object(d.a)(l.a.mark((function e(t){var r,s,c,a,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.username,s=n.email,c=n.password,e.next=3,f("/api/users",{method:"POST",body:JSON.stringify({username:r,email:s,password:c})});case 3:return a=e.sent,e.next=6,a.json();case 6:return u=e.sent,t(m(u.user)),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).catch(function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:(n=e.sent)&&n.errors&&P(n.errors);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):P(["Confirm Password field must be the same as the Password field"]);var n},children:[Object(y.jsx)("ul",{children:L.map((function(e,t){return Object(y.jsx)("li",{children:e},t)}))}),Object(y.jsxs)("label",{children:["Email",Object(y.jsx)("input",{type:"text",value:c,onChange:function(e){return a(e.target.value)},required:!0})]}),Object(y.jsxs)("label",{children:["Username",Object(y.jsx)("input",{type:"text",value:p,onChange:function(e){return O(e.target.value)},required:!0})]}),Object(y.jsxs)("label",{children:["Password",Object(y.jsx)("input",{type:"password",value:v,onChange:function(e){return w(e.target.value)},required:!0})]}),Object(y.jsxs)("label",{children:["Confirm Password",Object(y.jsx)("input",{type:"password",value:k,onChange:function(e){return C(e.target.value)},required:!0})]}),Object(y.jsx)("button",{type:"submit",children:"Sign Up"})]})};n(24);var C=function(e){var t=e.user,n=Object(u.b)(),s=Object(r.useState)(!1),c=Object(o.a)(s,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){if(a){var e=function(){i(!1)};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}}),[a]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("button",{onClick:function(){a||i(!0)},children:Object(y.jsx)("i",{class:"fas fa-user-astronaut"})}),a&&Object(y.jsxs)("ul",{className:"profile-dropdown",children:[Object(y.jsx)("li",{children:t.username}),Object(y.jsx)("li",{children:t.email}),Object(y.jsx)("li",{children:Object(y.jsx)("button",{onClick:function(e){e.preventDefault(),n(function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("/api/session",{method:"DELETE"});case 2:return n=e.sent,t({type:v}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Log Out"})})]})]})};var E=function(e){var t,n=e.isLoaded,r=Object(u.c)((function(e){return e.session.user}));return t=r?Object(y.jsx)(C,{user:r}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(i.b,{to:"/login",children:"Login"}),Object(y.jsx)(i.b,{to:"/signup",children:"Sign Up"})]}),Object(y.jsx)("ul",{children:Object(y.jsxs)("li",{children:[Object(y.jsx)(i.b,{exact:!0,to:"/",children:"Home"}),n&&t]})})};var T,L=function(){var e=Object(u.b)(),t=Object(r.useState)(!1),n=Object(o.a)(t,2),s=n[0],c=n[1];return Object(r.useEffect)((function(){e(function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("/api/session");case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,t(m(r.user)),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){return c(!0)}))}),[e]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(E,{isLoaded:s}),s&&Object(y.jsxs)(j.d,{children:[Object(y.jsx)(j.b,{path:"/login",children:Object(y.jsx)(S,{})}),Object(y.jsx)(j.b,{path:"/signup",children:Object(y.jsx)(k,{})})]})]})},P=n(14),U=n(27),q=Object(P.c)({session:g});T=Object(P.a)(U.a);var F=function(e){return Object(P.d)(q,e,T)}();function D(){return Object(y.jsx)(u.a,{store:F,children:Object(y.jsx)(i.a,{children:Object(y.jsx)(L,{})})})}a.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(D,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.41b11ca2.chunk.js.map